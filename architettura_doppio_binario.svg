<svg width="1200" height="900" viewBox="0 0 1200 900" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- Sfondo -->
  <rect width="1200" height="900" rx="20" fill="#f8fafc"/>
  
  <!-- TITOLO -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b" text-anchor="middle">ARCHITETTURA IBRIDA: DOUBLE-TRACK INGESTION &amp; MULTI-AGENT SEARCH</text>
  <line x1="100" y1="60" x2="1100" y2="60" stroke="#e2e8f0" stroke-width="2"/>

  <!-- BOX INPUT -->
  <rect x="50" y="100" width="200" height="150" rx="10" fill="#ffffff" stroke="#10b981" stroke-width="2"/>
  <text x="150" y="140" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#064e3b" text-anchor="middle">UTENTE / HR</text>
  <text x="150" y="170" font-family="Arial, sans-serif" font-size="12" fill="#065f46" text-anchor="middle">Upload PDF/TXT</text>
  <rect x="70" y="190" width="160" height="30" rx="5" fill="#ecfdf5"/>
  <text x="150" y="210" font-family="Arial, sans-serif" font-size="10" fill="#047857" text-anchor="middle">Nessun Data-Entry Manuale</text>

  <!-- FLUSSO INGESTION (DISCESA) -->
  <rect x="350" y="100" width="500" height="200" rx="15" fill="#eff6ff" stroke="#3b82f6" stroke-width="2"/>
  <text x="600" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e40af" text-anchor="middle">SISTEMA DI INGESTION (DOUBLE TRACK)</text>
  
  <!-- Track SQL -->
  <rect x="370" y="150" width="220" height="130" rx="10" fill="white" stroke="#3b82f6"/>
  <text x="480" y="175" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">BINARIO A: TAG EXTRACTION</text>
  <text x="480" y="200" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">L'LLM estrae entità strutturate:</text>
  <text x="480" y="220" font-family="Arial, sans-serif" font-size="10" fill="#1e40af" font-style="italic">- Competenze (Python, React)</text>
  <text x="480" y="240" font-family="Arial, sans-serif" font-size="10" fill="#1e40af" font-style="italic">- Certificazioni (Azure, OSCP)</text>

  <!-- Track Vector -->
  <rect x="610" y="150" width="220" height="130" rx="10" fill="white" stroke="#3b82f6"/>
  <text x="720" y="175" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e40af" text-anchor="middle">BINARIO B: SEMANTIC TRACK</text>
  <text x="720" y="200" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Spezzettamento e Vettorizzazione</text>
  <text x="720" y="225" font-family="Arial, sans-serif" font-size="10" fill="#1e40af" font-style="italic">all-MiniLM-L6-v2</text>
  <text x="720" y="245" font-family="Arial, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Intero contenuto del file</text>

  <!-- STORAGE (DESTRA) -->
  <rect x="950" y="150" width="200" height="130" rx="10" fill="#1e3a8a"/>
  <text x="1050" y="180" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">POSTGRES (SQL)</text>
  <text x="1050" y="205" font-family="Arial, sans-serif" font-size="11" fill="#93c5fd" text-anchor="middle">Tabella: User_Skills</text>
  <text x="1050" y="225" font-family="Arial, sans-serif" font-size="10" fill="#93c5fd" text-anchor="middle">(Dati certi e filtrabili)</text>

  <rect x="950" y="300" width="200" height="130" rx="10" fill="#1d4ed8"/>
  <text x="1050" y="330" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white" text-anchor="middle">QDRANT (Vector)</text>
  <text x="1050" y="355" font-family="Arial, sans-serif" font-size="11" fill="#93c5fd" text-anchor="middle">Embeddings</text>
  <text x="1050" y="375" font-family="Arial, sans-serif" font-size="10" fill="#93c5fd" text-anchor="middle">(Ricerca concettuale)</text>

  <!-- AGENTE ROUTER (CENTRO BASSO) -->
  <rect x="350" y="450" width="500" height="300" rx="20" fill="#f0fdf4" stroke="#10b981" stroke-width="3"/>
  <text x="600" y="485" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#064e3b" text-anchor="middle">AGENTE ORCHESTRATORE (Llama 3.1 8B)</text>
  
  <rect x="380" y="510" width="440" height="80" rx="10" fill="white" stroke="#10b981"/>
  <text x="600" y="535" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#065f46" text-anchor="middle">INTELLIGENT ROUTER &amp; QUERY PLANNER</text>
  <text x="600" y="560" font-family="Arial, sans-serif" font-size="11" fill="#334155" text-anchor="middle">"È una domanda su Tag (SQL) o su Concetti (Vector)?"</text>

  <!-- TOOLS INVENTORY -->
  <rect x="380" y="610" width="210" height="120" rx="10" fill="#ecfdf5" stroke="#10b981"/>
  <text x="485" y="635" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#065f46" text-anchor="middle">TOOL SQL EXECUTOR</text>
  <text x="485" y="660" font-family="Arial, sans-serif" font-size="10" fill="#065f46" text-anchor="middle">Query: SELECT * FROM skills</text>
  <text x="485" y="680" font-family="Arial, sans-serif" font-size="10" fill="#065f46" font-style="italic">Risposta certa (Zero Allucinazioni)</text>

  <rect x="610" y="610" width="210" height="120" rx="10" fill="#ecfdf5" stroke="#10b981"/>
  <text x="715" y="635" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#065f46" text-anchor="middle">TOOL VECTOR RETRIEVER</text>
  <text x="715" y="660" font-family="Arial, sans-serif" font-size="10" fill="#065f46" text-anchor="middle">Similarity Search in Qdrant</text>
  <text x="715" y="680" font-family="Arial, sans-serif" font-size="10" fill="#065f46" font-style="italic">Risposta per concetti vicini</text>

  <!-- FLUSSI INFORMAZIONE -->
  <!-- Ingestion -->
  <path d="M250 175 H350" stroke="#3b82f6" stroke-width="3" marker-end="url(#arrow-blue)"/>
  <path d="M850 175 H950" stroke="#334155" stroke-width="2" marker-end="url(#arrow-sql)"/>
  <path d="M830 240 L950 330" stroke="#1d4ed8" stroke-width="2" marker-end="url(#arrow-vector)"/>
  
  <!-- Search -->
  <path d="M150 250 V550 H350" fill="none" stroke="#10b981" stroke-width="3" marker-end="url(#arrow-green)"/>
  <text x="160" y="400" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#064e3b" transform="rotate(-90, 160, 400)">RICERCA UTENTE</text>

  <!-- Frecce Agente <-> Storage -->
  <path d="M590 670 H950 V280" fill="none" stroke="#1e3a8a" stroke-width="2" stroke-dasharray="4 4" marker-end="url(#arrow-sql)"/>
  <path d="M820 670 H920 V400 H950" fill="none" stroke="#1d4ed8" stroke-width="2" stroke-dasharray="4 4" marker-end="url(#arrow-vector)"/>

  <!-- DEFINIZIONI FRECCE -->
  <defs>
    <marker id="arrow-blue" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#3b82f6"/></marker>
    <marker id="arrow-sql" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#1e3a8a"/></marker>
    <marker id="arrow-vector" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#1d4ed8"/></marker>
    <marker id="arrow-green" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#10b981"/></marker>
  </defs>
</svg>
